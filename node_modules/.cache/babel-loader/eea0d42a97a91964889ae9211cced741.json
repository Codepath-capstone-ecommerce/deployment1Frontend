{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport apiClient from '../services/apiClient';\nexport default function useAppState() {\n  _s();\n\n  const [error, setError] = useState(null);\n  const [appState, setAppState] = useState({\n    name: null,\n    isAuthenticated: false,\n    cart: [],\n    favorites: [],\n    rewards: 0\n  });\n  const [vendorState, setvendorState] = useState({\n    currentOrders: []\n  });\n  useEffect(() => {\n    const fetchUser = async () => {\n      const {\n        data,\n        error\n      } = await apiClient.fetchUserFromToken();\n\n      if (data) {\n        setAppState(a => ({ ...a,\n          user: data.user,\n          isAuthenticated: true\n        }));\n      }\n\n      if (error) setError(error);\n    };\n\n    const token = localStorage.getItem(\"pizza_shop_token\");\n\n    if (token) {\n      apiClient.setToken(token);\n      fetchUser();\n    }\n  }, []);\n  useEffect(() => {\n    const fetchOrders = async () => {\n      const {\n        data,\n        error\n      } = await apiClient.getCurrentOrders();\n\n      if (data) {\n        setvendorState(a => ({ ...a,\n          currentOrders: data.orders\n        }));\n      }\n\n      if (error) setError(error);\n    };\n\n    fetchOrders();\n  }, [vendorState.currentOrders]); // useEffect(() => {\n  //   const fetchCart = async () => {\n  //     const { data, error } = await apiClient.listCart()\n  //     if (data) {\n  //       setAppState((a) => (\n  //         {\n  //           ...a, cart: data.cart\n  //         }\n  //       ))\n  //     }\n  //     if (error) setError(error)\n  //   }\n  //   if (appState.isAuthenticated){\n  //     fetchCart()\n  //   }\n  // }, [appState.isAuthenticated])\n  // useEffect(() => {\n  //   const fetchRewards = async () => {\n  //     const { data, error } = await apiClient.listRewards()\n  //     if (data) {\n  //       setAppState((a) => (\n  //         {\n  //           ...a, rewards: data.rewards\n  //         }\n  //       ))\n  //       //   setExercise(data.exercises)\n  //     }\n  //     if (error) setError(error)\n  //   }\n  //   if (appState.isAuthenticated){\n  //     fetchRewards()\n  //   }\n  // }, [appState.isAuthenticated])\n\n  return {\n    appState,\n    error,\n    setAppState,\n    setError,\n    vendorState,\n    setvendorState\n  };\n}\n\n_s(useAppState, \"JwepjWAqh8muN2Ew3ajVI7atyt4=\");","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/ecommerce/frontend/src/hooks/useAppState.js"],"names":["useEffect","useState","apiClient","useAppState","error","setError","appState","setAppState","name","isAuthenticated","cart","favorites","rewards","vendorState","setvendorState","currentOrders","fetchUser","data","fetchUserFromToken","a","user","token","localStorage","getItem","setToken","fetchOrders","getCurrentOrders","orders"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AAEA,eAAe,SAASC,WAAT,GAAuB;AAAA;;AACpC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBJ,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACK,QAAD,EAAWC,WAAX,IAA0BN,QAAQ,CAAC;AACvCO,IAAAA,IAAI,EAAE,IADiC;AAEvCC,IAAAA,eAAe,EAAE,KAFsB;AAGvCC,IAAAA,IAAI,EAAE,EAHiC;AAIvCC,IAAAA,SAAS,EAAC,EAJ6B;AAKvCC,IAAAA,OAAO,EAAE;AAL8B,GAAD,CAAxC;AASA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC;AAC7Cc,IAAAA,aAAa,EAAE;AAD8B,GAAD,CAA9C;AAIAf,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,SAAS,GAAG,YAAY;AAC5B,YAAM;AAAEC,QAAAA,IAAF;AAAQb,QAAAA;AAAR,UAAkB,MAAMF,SAAS,CAACgB,kBAAV,EAA9B;;AACA,UAAID,IAAJ,EAAU;AACRV,QAAAA,WAAW,CAAEY,CAAD,KACV,EACE,GAAGA,CADL;AACQC,UAAAA,IAAI,EAAEH,IAAI,CAACG,IADnB;AACyBX,UAAAA,eAAe,EAAE;AAD1C,SADU,CAAD,CAAX;AAKD;;AACD,UAAIL,KAAJ,EAAWC,QAAQ,CAACD,KAAD,CAAR;AACZ,KAVD;;AAYA,UAAMiB,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAd;;AACA,QAAIF,KAAJ,EAAW;AACTnB,MAAAA,SAAS,CAACsB,QAAV,CAAmBH,KAAnB;AACAL,MAAAA,SAAS;AACV;AACF,GAlBQ,EAkBN,EAlBM,CAAT;AAoBAhB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMyB,WAAW,GAAG,YAAY;AAC9B,YAAM;AAAER,QAAAA,IAAF;AAAQb,QAAAA;AAAR,UAAkB,MAAMF,SAAS,CAACwB,gBAAV,EAA9B;;AACA,UAAIT,IAAJ,EAAU;AACRH,QAAAA,cAAc,CAAEK,CAAD,KACb,EACE,GAAGA,CADL;AACQJ,UAAAA,aAAa,EAAEE,IAAI,CAACU;AAD5B,SADa,CAAD,CAAd;AAKD;;AACD,UAAIvB,KAAJ,EAAWC,QAAQ,CAACD,KAAD,CAAR;AACZ,KAVD;;AAWAqB,IAAAA,WAAW;AACZ,GAbQ,EAaN,CAACZ,WAAW,CAACE,aAAb,CAbM,CAAT,CAnCoC,CAkDpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,SAAO;AAAET,IAAAA,QAAF;AAAYF,IAAAA,KAAZ;AAAmBG,IAAAA,WAAnB;AAAgCF,IAAAA,QAAhC;AAA0CQ,IAAAA,WAA1C;AAAuDC,IAAAA;AAAvD,GAAP;AACD;;GAxFuBX,W","sourcesContent":["import { useEffect, useState } from \"react\";\nimport apiClient from '../services/apiClient';\n\nexport default function useAppState() {\n  const [error, setError] = useState(null)\n  const [appState, setAppState] = useState({\n    name: null,\n    isAuthenticated: false,\n    cart: [],\n    favorites:[],\n    rewards: 0,\n  })\n  \n\n  const [vendorState, setvendorState] = useState({\n    currentOrders: []\n  })\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const { data, error } = await apiClient.fetchUserFromToken()\n      if (data) {\n        setAppState((a) => (\n          {\n            ...a, user: data.user, isAuthenticated: true\n          }\n        ))\n      }\n      if (error) setError(error)\n    }\n\n    const token = localStorage.getItem(\"pizza_shop_token\")\n    if (token) {\n      apiClient.setToken(token)\n      fetchUser()\n    }\n  }, [])\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      const { data, error } = await apiClient.getCurrentOrders()\n      if (data) {\n        setvendorState((a) => (\n          {\n            ...a, currentOrders: data.orders\n          }\n        ))\n      }\n      if (error) setError(error)\n    }\n    fetchOrders()\n  }, [vendorState.currentOrders])\n\n  // useEffect(() => {\n  //   const fetchCart = async () => {\n  //     const { data, error } = await apiClient.listCart()\n  //     if (data) {\n  //       setAppState((a) => (\n  //         {\n  //           ...a, cart: data.cart\n  //         }\n  //       ))\n  //     }\n  //     if (error) setError(error)\n  //   }\n  //   if (appState.isAuthenticated){\n  //     fetchCart()\n  //   }\n\n  // }, [appState.isAuthenticated])\n  \n  // useEffect(() => {\n  //   const fetchRewards = async () => {\n  //     const { data, error } = await apiClient.listRewards()\n  //     if (data) {\n  //       setAppState((a) => (\n  //         {\n  //           ...a, rewards: data.rewards\n  //         }\n  //       ))\n  //       //   setExercise(data.exercises)\n  //     }\n  //     if (error) setError(error)\n  //   }\n  //   if (appState.isAuthenticated){\n  //     fetchRewards()\n  //   }\n\n  // }, [appState.isAuthenticated])\n\n  return { appState, error, setAppState, setError, vendorState, setvendorState }\n}"]},"metadata":{},"sourceType":"module"}