{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Button from'@material-ui/core/Button';import{useEffect,useState}from\"react\";import{Grid,Paper,Avatar,TextField,Typography,Link,Input}from'@material-ui/core';import FormControlLabel from'@material-ui/core/FormControlLabel';import Checkbox from'@material-ui/core/Checkbox';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import{useNavigate}from\"react-router-dom\";import apiClient from'../../services/apiClient';import{useAppStateContext}from'../../contexts/appStateContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddressForm(_ref){var form=_ref.form,setForm=_ref.setForm,setComplete=_ref.setComplete;var _useAppStateContext=useAppStateContext(),appState=_useAppStateContext.appState,setAppState=_useAppStateContext.setAppState;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isProcessing=_useState2[0],setIsProcessing=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];// const [complete,setComplete] = useState(false)\n//     const [form, setForm] = useState({\n//     first_name: \"\",\n//     last_name: \"\",\n//     address:\"\",\n//     email:\"\",\n//     postal_code:\"\"\n//   })\nuseEffect(function(){var checkDefaultValues=function checkDefaultValues(){if(appState.first_name!==\"\"){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{first_name:appState.first_name});});}if(appState.last_name!==\"\"){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{last_name:appState.last_name});});}if(appState.address!==\"\"){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{address:appState.address});});}if(appState.email!==\"\"){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{email:appState.email});});}//   if(appState.postal_code !==\"\"){\n//       setForm((f) => ({ ...f, postal_code: appState.postal_code }))\n//   }\n};checkDefaultValues();},[]);useEffect(function(){var c=true;for(var _i=0,_Object$entries=Object.entries(form);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];if(form[key]===\"\"||key===\"postal_code\"&&form[key].length!==5){c=false;}}setComplete(c);},[form]);var handleOnInputChange=function handleOnInputChange(event){setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},event.target.name,event.target.value));});};var handleOnSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$apiClient$logi,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsProcessing(true);setErrors(function(e){return _objectSpread(_objectSpread({},e),{},{form:null});});_context.next=4;return apiClient.loginUser({email:form.email,password:form.password});case 4:_yield$apiClient$logi=_context.sent;data=_yield$apiClient$logi.data;error=_yield$apiClient$logi.error;if(error){setErrors(function(e){return _objectSpread(_objectSpread({},e),{},{form:error});});}if(data===null||data===void 0?void 0:data.user){setAppState(function(a){return _objectSpread(_objectSpread({},a),{},{first_name:data.user.first_name,rewards:data.user.rewards,last_name:data.user.last_last,isAuthenticated:true,email:data.user.email});});apiClient.setToken(data.token);}setIsProcessing(false);navigate(\"/accountProfile\");case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleOnSubmit(){return _ref2.apply(this,arguments);};}();var paperStyle={padding:20,height:\"70vh\",width:280,margin:\"20px auto\"};// console.log(complete)\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Paper,{elevation:10,style:paperStyle,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:\"Delivery Information\"}),/*#__PURE__*/_jsx(TextField,{onChange:handleOnInputChange,defaultValue:appState.first_name,name:\"first_name\",label:\"First Name\",placeholder:\"Enter first name\",required:true}),/*#__PURE__*/_jsx(TextField,{onChange:handleOnInputChange,name:\"last_name\",defaultValue:appState.last_name,label:\"Last Name\",placeholder:\"Enter last name\",required:true}),/*#__PURE__*/_jsx(TextField,{onChange:handleOnInputChange,name:\"address\",defaultValue:appState.address,label:\"Address\",placeholder:\"Enter address\",fullWidth:true,required:true}),/*#__PURE__*/_jsx(TextField,{onChange:handleOnInputChange,name:\"email\",label:\"Email\",defaultValue:appState.email,placeholder:\"Enter email\",fullWidth:true,required:true}),/*#__PURE__*/_jsx(TextField,{onChange:handleOnInputChange,name:\"postal_code\",label:\"Postal Code\",placeholder:\"Enter postal code\",fullWidth:true,required:true})]})});}","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/deployment1Frontend/src/components/AddressForm/AddressForm.js"],"names":["Button","useEffect","useState","Grid","Paper","Avatar","TextField","Typography","Link","Input","FormControlLabel","Checkbox","LockOutlinedIcon","useNavigate","apiClient","useAppStateContext","AddressForm","form","setForm","setComplete","appState","setAppState","navigate","isProcessing","setIsProcessing","errors","setErrors","checkDefaultValues","first_name","f","last_name","address","email","c","Object","entries","key","value","length","handleOnInputChange","event","target","name","handleOnSubmit","e","loginUser","password","data","error","user","a","rewards","last_last","isAuthenticated","setToken","token","paperStyle","padding","height","width","margin"],"mappings":"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","sourcesContent":["import Button from '@material-ui/core/Button';\nimport { useEffect, useState } from \"react\"\nimport { Grid, Paper ,Avatar, TextField, Typography, Link, Input} from '@material-ui/core';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport { useNavigate } from \"react-router-dom\";\nimport apiClient from '../../services/apiClient';\nimport { useAppStateContext } from '../../contexts/appStateContext';\n\n\nexport default function AddressForm({form, setForm, setComplete}){\n    const { appState, setAppState} = useAppStateContext()\n    const navigate = useNavigate()\n    const [isProcessing, setIsProcessing] = useState(false)\n    const [errors, setErrors] = useState({})\n    // const [complete,setComplete] = useState(false)\n//     const [form, setForm] = useState({\n//     first_name: \"\",\n//     last_name: \"\",\n//     address:\"\",\n//     email:\"\",\n//     postal_code:\"\"\n//   })\n  useEffect(() =>{\n      const checkDefaultValues = () =>{\n          if(appState.first_name !==\"\"){\n              setForm((f) => ({ ...f, first_name: appState.first_name }))\n          }\n          if(appState.last_name !==\"\"){\n              setForm((f) => ({ ...f, last_name: appState.last_name }))\n          }\n          if(appState.address !==\"\"){\n              setForm((f) => ({ ...f, address: appState.address }))\n          }\n          if(appState.email !==\"\"){\n              setForm((f) => ({ ...f, email: appState.email }))\n          }\n        //   if(appState.postal_code !==\"\"){\n        //       setForm((f) => ({ ...f, postal_code: appState.postal_code }))\n        //   }\n      }\n      checkDefaultValues()\n  },[])\n\n  useEffect(()=>{\n    let c = true\n    for (const [key, value] of Object.entries(form)) {\n        if(form[key] === \"\" || (key ===\"postal_code\" && form[key].length !==5)){\n            c = false\n        }\n    }\n    setComplete(c)\n    \n\n  },[form])\n\n\n    const handleOnInputChange = (event) => {\n        setForm((f) => ({ ...f, [event.target.name]: event.target.value }))\n    }\n\n    const handleOnSubmit = async () => {\n        setIsProcessing(true)\n        setErrors((e) => ({ ...e, form: null }))\n\n        const {data, error } = await apiClient.loginUser({email: form.email, password: form.password})\n        if (error){\n          setErrors((e) => ({ ...e, form:error}))\n        }\n        if (data?.user){\n            setAppState((a) => (\n                {\n                    ...a, \n                    first_name: data.user.first_name,\n                    rewards:data.user.rewards,\n                    last_name:data.user.last_last,\n                    isAuthenticated: true,\n                    email:data.user.email\n                }\n                ))\n          apiClient.setToken(data.token)\n        }\n        setIsProcessing(false)\n        navigate(\"/accountProfile\")\n      }\n\n    const paperStyle = {\n        padding:20,\n        height:\"70vh\",\n        width:280,\n        margin:\"20px auto\"\n    }\n    // console.log(complete)\n    return(\n        <div>\n            <Paper elevation = {10} style= {paperStyle}>\n                <Typography variant=\"h6\" align=\"center\">Delivery Information</Typography>\n                <TextField  \n                    onChange={handleOnInputChange} \n                    defaultValue={appState.first_name}\n                    name =\"first_name\"\n                    label = \"First Name\" \n                    placeholder = \"Enter first name\"  \n                    required\n                />\n                <TextField \n                    onChange={handleOnInputChange} \n                    name =\"last_name\"\n                    defaultValue={appState.last_name}\n                    label = \"Last Name\" \n                    placeholder = \"Enter last name\"   \n                    required\n                />\n                <TextField \n                    onChange={handleOnInputChange} \n                    name =\"address\"\n                    defaultValue={appState.address}\n                    label = \"Address\" \n                    placeholder = \"Enter address\" \n                    fullWidth \n                    required\n                />\n                <TextField \n                    onChange={handleOnInputChange} \n                    name =\"email\"\n                    label = \"Email\"\n                    defaultValue={appState.email} \n                    placeholder = \"Enter email\" \n                    fullWidth \n                    required\n                />\n                <TextField \n                    onChange={handleOnInputChange} \n                    name =\"postal_code\"\n                    label = \"Postal Code\" \n                    placeholder = \"Enter postal code\" \n                    fullWidth \n                    required\n                />\n            </Paper>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}