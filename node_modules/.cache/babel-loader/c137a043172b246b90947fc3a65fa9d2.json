{"ast":null,"code":"import axios from \"axios\";\n\nclass ApiClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl;\n    this.token = null;\n    this.tokenName = \"pizza_shop_token\";\n  }\n\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem(this.tokenName, token);\n  }\n\n  async request({\n    endpoint,\n    method = 'GET',\n    data = {}\n  }) {\n    const url = `${this.remoteHostUrl}/${endpoint}`;\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (this.token) {\n      headers[\"Authorization\"] = `Bearer ${this.token}`;\n    }\n\n    try {\n      const res = await axios({\n        url,\n        method,\n        data,\n        headers\n      });\n      return {\n        data: res.data,\n        error: null\n      };\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n\n      console.error({\n        errorResponse: error.response\n      });\n      const message = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message;\n      return {\n        data: null,\n        error: message || String(error)\n      };\n    }\n  }\n\n  async listProducts() {\n    return await this.request({\n      endpoint: 'products/get',\n      method: \"GET\"\n    });\n  }\n\n  async getCurrentOrders() {\n    return await this.request({\n      endpoint: 'order/current',\n      method: \"GET\"\n    });\n  }\n\n  async createNutrition(nutrition) {\n    return await this.request({\n      endpoint: 'nutrition',\n      method: \"POST\",\n      data: nutrition\n    });\n  }\n\n  async loginUser(credentials) {\n    return await this.request({\n      endpoint: 'auth/login',\n      method: 'POST',\n      data: credentials\n    });\n  }\n\n  async signupUser(credentials) {\n    return await this.request({\n      endpoint: 'auth/register',\n      method: 'POST',\n      data: credentials\n    });\n  }\n\n  async logoutUser() {\n    this.setToken(null);\n    localStorage.setItem(this.tokenName, \"\");\n  }\n\n}\n\nexport default new ApiClient(process.env.REACT_APP_REMOTE_HOST_URL || \"http://localhost:3001\");","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/ecommerce/frontend/src/services/apiClient.js"],"names":["axios","ApiClient","constructor","remoteHostUrl","token","tokenName","setToken","localStorage","setItem","request","endpoint","method","data","url","headers","res","error","console","errorResponse","response","message","String","listProducts","getCurrentOrders","createNutrition","nutrition","loginUser","credentials","signupUser","logoutUser","process","env","REACT_APP_REMOTE_HOST_URL"],"mappings":"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","sourcesContent":["import axios from \"axios\"\n\nclass ApiClient{\n  constructor(remoteHostUrl){\n    this.remoteHostUrl = remoteHostUrl\n    this.token = null\n    this.tokenName = \"pizza_shop_token\"\n  }\n\n  setToken(token){\n    this.token = token\n    localStorage.setItem(this.tokenName,token)\n  }\n\n  async request({ endpoint,method = 'GET', data = {}}){\n\n    const url = `${this.remoteHostUrl}/${endpoint}`\n    const headers =  {\n      \"Content-Type\": \"application/json\",\n    }\n\n    if (this.token) {\n      headers[\"Authorization\"] = `Bearer ${this.token}`;\n    }\n\n    try{\n      const res = await axios({url,method,data,headers})\n      return { data:res.data, error:null}\n    }catch (error){\n      console.error({errorResponse: error.response})\n      const message = error?.response?.data?.error?.message\n      return { data: null, error: message || String(error)}\n    }\n  }\n\n  async listProducts(){\n    return await this.request({endpoint:'products/get', method:\"GET\"})\n  }\n\n  async getCurrentOrders(){\n    return await this.request({endpoint:'order/current', method:\"GET\"})\n  }\n\n  async createNutrition(nutrition){\n    return await this.request({ endpoint:'nutrition', method: \"POST\", data: nutrition})\n  }\n\n  async loginUser(credentials){\n    return await this.request({ endpoint: 'auth/login', method: 'POST', data: credentials})\n  }\n\n  async signupUser(credentials){\n    return await this.request({ endpoint: 'auth/register', method: 'POST', data: credentials})\n  }\n\n  async logoutUser(){\n    this.setToken(null)\n    localStorage.setItem(this.tokenName,\"\")\n  }\n}\n\nexport default new ApiClient(process.env.REACT_APP_REMOTE_HOST_URL || \"http://localhost:3001\")"]},"metadata":{},"sourceType":"module"}