{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport apiClient from '../services/apiClient';\nexport default function useAppState() {\n  _s();\n\n  const [error, setError] = useState(null);\n  const [appState, setAppState] = useState({\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n    isAuthenticated: false,\n    cart: [],\n    favorites: [],\n    rewards: 0,\n    address: ''\n  });\n  const [vendorState, setvendorState] = useState({\n    currentOrders: []\n  });\n  useEffect(() => {\n    const fetchUser = async () => {\n      const {\n        data,\n        error\n      } = await apiClient.fetchUserFromToken();\n\n      if (data) {\n        console.log(data.publicUser);\n        setAppState(a => ({ ...a,\n          first_name: data.publicUser.first_name,\n          last_name: data.publicUser.last_name,\n          email: data.publicUser.email,\n          rewards: data.publicUser.rewards,\n          isAuthenticated: true,\n          address: data.publicUser.address\n        }));\n      }\n\n      if (error) setError(error);\n    };\n\n    const token = localStorage.getItem(\"pizza_shop_token\");\n\n    if (token) {\n      apiClient.setToken(token);\n      fetchUser();\n    }\n  }, []);\n  useEffect(() => {\n    const fetchOrders = async () => {\n      const {\n        data,\n        error\n      } = await apiClient.getCurrentOrders();\n\n      if (data) {\n        setvendorState(a => ({ ...a,\n          currentOrders: data.orders\n        }));\n      }\n\n      if (error) setError(error);\n    };\n\n    fetchOrders();\n  }, [vendorState.currentOrders.length]); // useEffect(() => {\n  //   const fetchCart = async () => {\n  //     const { data, error } = await apiClient.listCart()\n  //     if (data) {\n  //       setAppState((a) => (\n  //         {\n  //           ...a, cart: data.cart\n  //         }\n  //       ))\n  //     }\n  //     if (error) setError(error)\n  //   }\n  //   if (appState.isAuthenticated){\n  //     fetchCart()\n  //   }\n  // }, [appState.isAuthenticated])\n  // useEffect(() => {\n  //   const fetchRewards = async () => {\n  //     const { data, error } = await apiClient.listRewards()\n  //     if (data) {\n  //       setAppState((a) => (\n  //         {\n  //           ...a, rewards: data.rewards\n  //         }\n  //       ))\n  //       //   setExercise(data.exercises)\n  //     }\n  //     if (error) setError(error)\n  //   }\n  //   if (appState.isAuthenticated){\n  //     fetchRewards()\n  //   }\n  // }, [appState.isAuthenticated])\n\n  return {\n    appState,\n    error,\n    setAppState,\n    setError,\n    vendorState,\n    setvendorState\n  };\n}\n\n_s(useAppState, \"Em9MQ7VNHA0BpBhUpN5xrYBl3+s=\");","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/ecommerce/frontend/src/hooks/useAppState.js"],"names":["useEffect","useState","apiClient","useAppState","error","setError","appState","setAppState","first_name","last_name","email","isAuthenticated","cart","favorites","rewards","address","vendorState","setvendorState","currentOrders","fetchUser","data","fetchUserFromToken","console","log","publicUser","a","token","localStorage","getItem","setToken","fetchOrders","getCurrentOrders","orders","length"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport apiClient from '../services/apiClient';\n\nexport default function useAppState() {\n  const [error, setError] = useState(null)\n  const [appState, setAppState] = useState({\n    first_name: \"\",\n    last_name:\"\",\n    email:\"\",\n    isAuthenticated: false,\n    cart: [],\n    favorites:[],\n    rewards: 0,\n    address:''\n  })\n  \n\n  const [vendorState, setvendorState] = useState({\n    currentOrders: []\n  })\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const { data, error } = await apiClient.fetchUserFromToken()\n      if (data) {\n        console.log(data.publicUser)\n        setAppState((a) => (\n          {\n            ...a, \n            first_name: data.publicUser.first_name, \n            last_name:data.publicUser.last_name,\n            email:data.publicUser.email,\n            rewards:data.publicUser.rewards,\n            isAuthenticated: true,\n            address:data.publicUser.address\n          }\n        ))\n      }\n      if (error) setError(error)\n    }\n\n    const token = localStorage.getItem(\"pizza_shop_token\")\n    if (token) {\n      apiClient.setToken(token)\n      fetchUser()\n    }\n  }, [])\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      const { data, error } = await apiClient.getCurrentOrders()\n      if (data) {\n        setvendorState((a) => (\n          {\n            ...a, currentOrders: data.orders\n          }\n        ))\n      }\n      if (error) setError(error)\n    }\n    fetchOrders()\n  }, [vendorState.currentOrders.length])\n\n  // useEffect(() => {\n  //   const fetchCart = async () => {\n  //     const { data, error } = await apiClient.listCart()\n  //     if (data) {\n  //       setAppState((a) => (\n  //         {\n  //           ...a, cart: data.cart\n  //         }\n  //       ))\n  //     }\n  //     if (error) setError(error)\n  //   }\n  //   if (appState.isAuthenticated){\n  //     fetchCart()\n  //   }\n\n  // }, [appState.isAuthenticated])\n  \n  // useEffect(() => {\n  //   const fetchRewards = async () => {\n  //     const { data, error } = await apiClient.listRewards()\n  //     if (data) {\n  //       setAppState((a) => (\n  //         {\n  //           ...a, rewards: data.rewards\n  //         }\n  //       ))\n  //       //   setExercise(data.exercises)\n  //     }\n  //     if (error) setError(error)\n  //   }\n  //   if (appState.isAuthenticated){\n  //     fetchRewards()\n  //   }\n\n  // }, [appState.isAuthenticated])\n\n  return { appState, error, setAppState, setError, vendorState, setvendorState }\n}"]},"metadata":{},"sourceType":"module"}