{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Typograph,Button,Divider,Typography}from'@material-ui/core';import{Elements,CardElement,ElementsConsumer}from\"@stripe/react-stripe-js\";import{loadStripe}from'@stripe/stripe-js';import Review from'../Review/Review';import apiClient from'../../services/apiClient';//grab stripe promise with public key  (put into env file later)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var stripePromise=loadStripe('pk_test_51JHVxDAT6YdOUgSd9z0elQAkI6zeC8p4dd8YBYk2nTyIiGumxkBUqPXnyQPdNGKhfVAwTCmgoWUVl57H5EBrIOsL00J3lY34QJ');export default function PaymentForm(_ref){var checkoutToken=_ref.checkoutToken;var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,elements,stripe){var cardElement,_yield$stripe$createP,error,paymentMethod,orderData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(!stripe||!elements)){_context.next=3;break;}return _context.abrupt(\"return\");case 3:cardElement=elements.getElement(CardElement);_context.next=6;return stripe.createPaymentMethod({type:'card',card:cardElement});case 6:_yield$stripe$createP=_context.sent;error=_yield$stripe$createP.error;paymentMethod=_yield$stripe$createP.paymentMethod;if(error){console.log(error);}else{alert(\"success\");orderData={line_items:[],customer:\"\",shipping:{name:\"Primary\",street:'',postal_zip_code:\"\"}};}case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Review,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Payment method\"}),/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(ElementsConsumer,{children:function children(_ref3){var elements=_ref3.elements,stripe=_ref3.stripe;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e,elements,stripe);},children:[/*#__PURE__*/_jsx(CardElement,{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]});}})})]});}","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/deployment1Frontend/src/components/PaymentForm/PaymentForm.js"],"names":["Typograph","Button","Divider","Typography","Elements","CardElement","ElementsConsumer","loadStripe","Review","apiClient","stripePromise","PaymentForm","checkoutToken","handleSubmit","event","elements","stripe","preventDefault","cardElement","getElement","createPaymentMethod","type","card","error","paymentMethod","console","log","alert","orderData","line_items","customer","shipping","name","street","postal_zip_code","e"],"mappings":"uRAAA,OAAQA,SAAR,CAAmBC,MAAnB,CAA2BC,OAA3B,CAAoCC,UAApC,KAAqD,mBAArD,CACA,OAASC,QAAT,CAAmBC,WAAnB,CAAgCC,gBAAhC,KAAwD,yBAAxD,CACA,OAASC,UAAT,KAA0B,mBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CAEA;6IACA,GAAMC,CAAAA,aAAa,CAAGH,UAAU,CAAC,6GAAD,CAAhC,CACA,cAAe,SAASI,CAAAA,WAAT,MAAwC,IAAjBC,CAAAA,aAAiB,MAAjBA,aAAiB,CAEnD,GAAMC,CAAAA,YAAY,2FAAG,iBAAOC,KAAP,CAAaC,QAAb,CAAsBC,MAAtB,sLACjBF,KAAK,CAACG,cAAN,GADiB,KAGd,CAACD,MAAD,EAAW,CAACD,QAHE,kEAKXG,WALW,CAKGH,QAAQ,CAACI,UAAT,CAAoBd,WAApB,CALH,uBAOsBW,CAAAA,MAAM,CAACI,mBAAP,CAA2B,CAAEC,IAAI,CAAC,MAAP,CAAeC,IAAI,CAACJ,WAApB,CAA3B,CAPtB,4CAOTK,KAPS,uBAOTA,KAPS,CAOFC,aAPE,uBAOFA,aAPE,CASjB,GAAGD,KAAH,CAAS,CACLE,OAAO,CAACC,GAAR,CAAYH,KAAZ,EACH,CAFD,IAEK,CACDI,KAAK,CAAC,SAAD,CAAL,CACMC,SAFL,CAEiB,CACdC,UAAU,CAAE,EADE,CAEdC,QAAQ,CAAC,EAFK,CAGdC,QAAQ,CAAC,CACLC,IAAI,CAAC,SADA,CAELC,MAAM,CAAC,EAFF,CAGLC,eAAe,CAAC,EAHX,CAHK,CAFjB,CAWJ,CAtBgB,uDAAH,kBAAZrB,CAAAA,YAAY,qDAAlB,CAyBA,mBACI,wCACA,KAAC,MAAD,IADA,cAEA,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,4BAFA,cAGA,KAAC,QAAD,EAAU,MAAM,CAAEH,aAAlB,uBACI,KAAC,gBAAD,WACK,4BAAGK,CAAAA,QAAH,OAAGA,QAAH,CAAaC,MAAb,OAAaA,MAAb,oBACG,cAAM,QAAQ,CAAE,kBAACmB,CAAD,QAAOtB,CAAAA,YAAY,CAACsB,CAAD,CAAGpB,QAAH,CAAYC,MAAZ,CAAnB,EAAhB,wBACI,KAAC,WAAD,IADJ,cAEI,aAFJ,kBAEU,aAFV,GADH,EADL,EADJ,EAHA,GADJ,CAwBH","sourcesContent":["import {Typograph, Button, Divider, Typography} from '@material-ui/core'\nimport { Elements, CardElement, ElementsConsumer } from \"@stripe/react-stripe-js\"\nimport { loadStripe} from '@stripe/stripe-js'\nimport Review from '../Review/Review'\nimport apiClient from '../../services/apiClient';\n\n//grab stripe promise with public key  (put into env file later)\nconst stripePromise = loadStripe('pk_test_51JHVxDAT6YdOUgSd9z0elQAkI6zeC8p4dd8YBYk2nTyIiGumxkBUqPXnyQPdNGKhfVAwTCmgoWUVl57H5EBrIOsL00J3lY34QJ')\nexport default function PaymentForm({ checkoutToken }) {\n\n    const handleSubmit = async (event,elements,stripe) => {\n        event.preventDefault();\n\n        if(!stripe || !elements) return ;\n\n        const cardElement = elements.getElement(CardElement)\n\n        const { error, paymentMethod } = await stripe.createPaymentMethod({ type:'card', card:cardElement})\n\n        if(error){\n            console.log(error)\n        }else{\n            alert(\"success\")\n            const orderData = {\n                line_items: [],\n                customer:\"\",\n                shipping:{\n                    name:\"Primary\",\n                    street:'',\n                    postal_zip_code:\"\"\n                }\n            }\n        }\n    }\n\n    return (\n        <>\n        <Review></Review>\n        <Typography variant=\"h6\">Payment method</Typography>\n        <Elements stripe={stripePromise}>\n            <ElementsConsumer>\n                {({ elements, stripe }) => (\n                    <form onSubmit={(e) => handleSubmit(e,elements,stripe)}>\n                        <CardElement/>\n                        <br/> <br/>\n                        {/* <div style={{display:'flex', justifyContent: 'space-between'}}>\n                            <Button>Back</Button>\n                            <Button type=\"submit\" variant=\"contained\" disabled={!stripe} color=\"primary\">\n                                Pay\n                            </Button>\n\n                        </div> */}\n                        \n                    </form>\n                )}\n            </ElementsConsumer>\n        </Elements>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}