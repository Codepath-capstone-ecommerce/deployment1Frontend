{"ast":null,"code":"var _jsxFileName = \"/Users/kordellschrock/Documents/Github/ecommerce/frontend/src/components/CartCard/CartCard.js\",\n    _s = $RefreshSig$();\n\nimport { Card, Typography, Box, Button, CardContent, CardMedia, Grid, IconButton } from \"@material-ui/core\";\nimport { useAppStateContext } from '../../contexts/appStateContext';\nimport apiClient from '../../services/apiClient';\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove'; //write function that can send products to a cart once buttons are clicked\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CartCard({\n  product\n}) {\n  _s();\n\n  const {\n    appState,\n    setAppState\n  } = useAppStateContext();\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [img, setImg] = useState([]);\n  const [price, setPrice] = useState(0);\n  const check = appState.review[appState.review.findIndex(products => products.name === product.name)];\n  const initialize = check ? check.quantity : product.quantity;\n  const [quantity, setQuantity] = useState(initialize);\n  const [total, setTotal] = useState(appState.cart.length); // console.log(product)\n  // console.log(appState.review)\n\n  const increment = () => {\n    setQuantity(q => q + 1);\n  };\n\n  const decrement = () => {\n    if (quantity !== 0) {\n      setQuantity(q => q - 1);\n    }\n  }; //fix bug with add more items from the cart\n\n\n  useEffect(() => {\n    const updateCart = () => {\n      let newCart = [];\n      console.log(appState.review);\n\n      for (let i = 0; i < appState.review.length; i++) {\n        for (let j = 0; j < appState.review[i].quantity; j++) {\n          newCart.push(appState.review[i].name);\n        }\n      }\n\n      return newCart;\n    };\n\n    if (appState.review.length) {\n      const newCart = updateCart();\n      setAppState(a => ({ ...a,\n        cart: newCart\n      }));\n    }\n  }, [total]); //there's a bug with this useffect\n\n  useEffect(() => {\n    const updateTotal = () => {\n      let newTotal = 0;\n\n      for (let i = 0; i < appState.review.length; i++) {\n        newTotal += appState.review[i].quantity;\n      }\n\n      return newTotal;\n    };\n\n    const newTotal = updateTotal();\n\n    if (newTotal) {\n      setTotal(newTotal);\n    }\n  }, [appState.review]); // console.log(total)\n\n  useEffect(() => {\n    const updateReview = () => {\n      const name = product.name;\n      const elementsIndex = appState.review.findIndex(product => product.name === name);\n      let newArray = [...appState.review]; // console.log(appState.review)\n\n      if (newArray.length && elementsIndex >= 0) {\n        newArray[elementsIndex].quantity = quantity;\n        setAppState(a => ({ ...a,\n          review: newArray\n        }));\n      }\n    };\n\n    updateReview();\n  }, [quantity]); // console.log(appState.cart)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        var _productRes$data, _productRes$data2;\n\n        const productRes = await apiClient.fetchProductByName({\n          productName: product\n        });\n\n        if (productRes === null || productRes === void 0 ? void 0 : (_productRes$data = productRes.data) === null || _productRes$data === void 0 ? void 0 : _productRes$data.productResponse[0].img) {\n          setImg(productRes.data.productResponse[0].img);\n        }\n\n        if (productRes === null || productRes === void 0 ? void 0 : (_productRes$data2 = productRes.data) === null || _productRes$data2 === void 0 ? void 0 : _productRes$data2.productResponse[0].price) {\n          setPrice(productRes.data.productResponse[0].price);\n        }\n\n        let obj = {};\n        obj['name'] = product.name;\n        obj['price'] = productRes.data.productResponse[0].price;\n        obj['img'] = productRes.data.productResponse[0].img;\n        obj['quantity'] = quantity;\n        let copy = true; // review = [{name:\"pizza\",'price':2,'img':imgurl,'quantity':3}]\n        // let existReview = appState.review.find((review) => review.name === product.name)\n        // console.log(existReview)\n\n        for (let i = 0; appState.review.length; i++) {\n          if (appState.review[i].name === product.name) {\n            copy = false;\n          }\n        }\n\n        if (copy) {\n          setAppState(a => ({ ...a,\n            review: [...a.review, obj]\n          }));\n        }\n      } catch (err) {\n        setError(err);\n      }\n    };\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        direction: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          container: true,\n          direction: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: img,\n            width: 150,\n            height: 150,\n            alt: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            p: 8,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            marginTop: 8,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              children: [\"Total: $\", product.quantity * price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 1,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            border: 1,\n            marginTop: 8,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-evenly\",\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: () => decrement(),\n              children: /*#__PURE__*/_jsxDEV(RemoveIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 69\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              children: quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: () => increment(),\n              children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 69\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CartCard, \"V/L4Z0fs3wrV/2FV+SUsFgk6s5A=\", false, function () {\n  return [useAppStateContext];\n});\n\n_c = CartCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartCard\");","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/ecommerce/frontend/src/components/CartCard/CartCard.js"],"names":["Card","Typography","Box","Button","CardContent","CardMedia","Grid","IconButton","useAppStateContext","apiClient","useState","useEffect","axios","Link","AddIcon","RemoveIcon","CartCard","product","appState","setAppState","error","setError","isLoading","setIsLoading","img","setImg","price","setPrice","check","review","findIndex","products","name","initialize","quantity","setQuantity","total","setTotal","cart","length","increment","q","decrement","updateCart","newCart","console","log","i","j","push","a","updateTotal","newTotal","updateReview","elementsIndex","newArray","fetchData","productRes","fetchProductByName","productName","data","productResponse","obj","copy","err"],"mappings":"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","sourcesContent":["import { Card, Typography, Box, Button, CardContent, CardMedia, Grid, IconButton } from \"@material-ui/core\"\nimport { useAppStateContext } from '../../contexts/appStateContext';\nimport apiClient from '../../services/apiClient';\nimport { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { Link } from \"react-router-dom\"\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\n//write function that can send products to a cart once buttons are clicked\nexport default function CartCard({ product }) {\n    const { appState, setAppState } = useAppStateContext()\n    const [error, setError] = useState(null)\n    const [isLoading, setIsLoading] = useState(false)\n    const [img, setImg] = useState([])\n    const [price, setPrice] = useState(0)\n    const check = appState.review[appState.review.findIndex(products => products.name === product.name)]\n    const initialize = check ? check.quantity : product.quantity\n    const [quantity, setQuantity] = useState(initialize);\n    const [total,setTotal] = useState(appState.cart.length)\n\n    // console.log(product)\n    // console.log(appState.review)\n\n    const increment = () => {\n        setQuantity((q) => (q + 1))\n    }\n\n\n    const decrement = () => {\n        if (quantity !== 0) {\n            setQuantity((q) => (q - 1))\n        }\n    }\n\n    //fix bug with add more items from the cart\n    useEffect(() => {\n        const updateCart = () => {\n            let newCart = []\n            console.log(appState.review)\n            for (let i = 0; i < appState.review.length; i++) {\n                for (let j = 0; j < appState.review[i].quantity; j++) {\n                    newCart.push(appState.review[i].name)\n                }\n\n            }\n            return newCart\n        }\n\n        if(appState.review.length){\n            const newCart = updateCart()\n    \n            setAppState((a) => ({\n                ...a,\n                cart: newCart\n            }))\n        }\n    },[total])\n\n    //there's a bug with this useffect\n    useEffect(() => {\n        const updateTotal = () => {\n            let newTotal = 0\n            for (let i = 0; i < appState.review.length; i++) {\n                newTotal += appState.review[i].quantity\n\n            }\n            return newTotal\n\n        }\n\n        const newTotal = updateTotal()\n        if(newTotal){\n            setTotal(newTotal)\n        }\n        \n    },[appState.review])\n    // console.log(total)\n\n    useEffect(() => {\n        const updateReview = () => {\n            const name = product.name\n            const elementsIndex = appState.review.findIndex(product => product.name === name)\n            let newArray = [...appState.review]\n            // console.log(appState.review)\n            if (newArray.length && elementsIndex>=0) {\n                newArray[elementsIndex].quantity = quantity\n                setAppState((a) => (\n                    {\n                        ...a,\n                        review: newArray\n                    }\n                ))\n            }\n\n        }\n        updateReview()\n    }, [quantity])\n\n    // console.log(appState.cart)\n    useEffect(() => {\n\n\n        const fetchData = async () => {\n            try {\n                const productRes = await apiClient.fetchProductByName({ productName: product })\n                if (productRes?.data?.productResponse[0].img) {\n                    setImg(productRes.data.productResponse[0].img)\n                }\n                if (productRes?.data?.productResponse[0].price) {\n                    setPrice(productRes.data.productResponse[0].price)\n                }\n                let obj = {}\n                obj['name'] = product.name\n                obj['price'] = productRes.data.productResponse[0].price\n                obj['img'] = productRes.data.productResponse[0].img\n                obj['quantity'] = quantity\n\n                let copy = true\n                // review = [{name:\"pizza\",'price':2,'img':imgurl,'quantity':3}]\n                // let existReview = appState.review.find((review) => review.name === product.name)\n                // console.log(existReview)\n                for (let i = 0; appState.review.length; i++) {\n                    if (appState.review[i].name === product.name) {\n                        copy = false\n                    }\n                }\n                if (copy) {\n                    setAppState((a) => (\n                        {\n                            ...a,\n                            review: [...a.review, obj]\n                        }\n                    ))\n                }\n\n\n            } catch (err) {\n                setError(err)\n            }\n\n        }\n\n        fetchData()\n    }, [])\n\n    return (\n        <Card>\n            {/* <CardMedia image={img} alt={product.name} height={200} width={150}></CardMedia> */}\n            <CardContent>\n                {/* <CardMedia image={img} alt={product.name}></CardMedia> */}\n\n                <Grid container direction=\"row\">\n                    <Grid item xs={4} container direction=\"row\">\n                        <img src={img} width={150} height={150} alt={product.name}></img>\n                        <Box p={8}>\n                            <Typography>{product.name}</Typography>\n                        </Box>\n                    </Grid>\n                    <Grid item xs={4}>\n                        <Box marginTop={8}>\n                            <Typography>Total: ${product.quantity * price}</Typography>\n                        </Box>\n                    </Grid>\n                    <Grid item xs={1}>\n                        <Box border={1}  marginTop={8} display=\"flex\" alignItems='center' justifyContent=\"space-evenly\">\n                            <IconButton onClick={() => decrement()}><RemoveIcon/></IconButton>\n                            {/* <input type=\"image\" onClick={() => decrement()} id=\"image\" height=\"40px\" width=\"40px\" alt=\"minus sign\" src={minus_sign}></input> */}\n                            <Typography>{quantity}</Typography>\n                            <IconButton onClick={() => increment()}><AddIcon/></IconButton>\n                            {/* <input type=\"image\" onClick={() => increment()} id=\"image\" height=\"40px\" width=\"40px\" alt=\"plus sign\" src={plus_sign}></input> */}\n                        </Box>\n                    </Grid>\n                </Grid>\n\n            </CardContent>\n\n        </Card>\n\n    )\n}\n"]},"metadata":{},"sourceType":"module"}