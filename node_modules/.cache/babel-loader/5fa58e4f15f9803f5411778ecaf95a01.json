{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Typography from\"@material-ui/core/Typography\";import classNames from\"classnames\";import Box from\"@material-ui/core/Box\";import{Container}from\"@material-ui/core\";import{Button}from\"@material-ui/core\";import VendorDashboard from\"../VendorDashboard/VendorDashboard\";import{useAppStateContext}from\"../../contexts/appStateContext\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Link from\"@material-ui/core/Link\";import{formatDate}from\"../../utils/format\";import{createTheme,MuiThemeProvider}from\"@material-ui/core/styles\";import Modal from\"@material-ui/core/Modal\";import{useEffect,useState}from\"react\";import Grid from\"@material-ui/core/Grid\";import Divider from\"@material-ui/core/Divider\";import axios from\"axios\";import{DateRangePicker}from'react-date-range';// date range\nimport'react-date-range/dist/styles.css';// main css file\nimport'react-date-range/dist/theme/default.css';// theme css file\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}var theme=createTheme({palette:{primary:{light:\"#757ce8\",main:\"#3f50b5\",dark:\"#002884\",contrastText:\"#fff\"},secondary:{light:\"#ff7961\",main:\"#f44336\",dark:\"#ba000d\",contrastText:\"#000\"},green:{main:\"#43a047\"}}});var useStyles=makeStyles(function(theme){return{root:{display:\"flex\"},appBar:{position:\"relative\"},// necessary for content to be below app bar\ntoolbar:theme.mixins.toolbar,content:{flexGrow:1,backgroundColor:theme.palette.background.default,padding:theme.spacing(3)},dateRange:{marginTop:50},title:{color:\"#00000\",fontSize:35,fontWeight:600,// or 'bold'\nmarginTop:50},customContainer:{paddingLeft:84,paddingRight:84},seeMore:{marginTop:theme.spacing(3)},showMoreButton:{color:theme.palette.green,height:30},paper:{position:\"absolute\",width:400,backgroundColor:theme.palette.background.paper,border:\"2px solid #000\",boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});export default function VendorCurrentOrders(){var _useAppStateContext=useAppStateContext(),vendorState=_useAppStateContext.vendorState,setvendorState=_useAppStateContext.setvendorState;var classes=useStyles();var _useState=useState(getModalStyle),_useState2=_slicedToArray(_useState,1),modalStyle=_useState2[0];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),modalId=_useState6[0],setModalId=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),products=_useState8[0],setProducts=_useState8[1];var _useState9=useState(vendorState.pastOrders),_useState10=_slicedToArray(_useState9,2),filterOrder=_useState10[0],setFilterOrder=_useState10[1];var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var _useState11=useState([{startDate:new Date(),endDate:new Date(),key:'selection'}]),_useState12=_slicedToArray(_useState11,2),dateRange=_useState12[0],setDateRange=_useState12[1];var start=dateRange[0].startDate;var end=dateRange[0].endDate;useEffect(function(){setFilterOrder(vendorState.pastOrders.filter(function(item){var date=new Date(item.created_at);date.setHours(0,0,0,0);// console.log(date)\n// console.log(\"start: \",start)\n// console.log(\"end: \",end)\nreturn date>=start&&date<=end;}));},[start,end,vendorState.pastOrders]);console.log(filterOrder);function preventDefault(event){event.preventDefault();}useEffect(function(){// action on update of modal\nvar fetchOrderDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _res$data;var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:3001/order/detailByID\",{params:{orderId:modalId}});case 2:res=_context.sent;//const res = await apiClient.getOrderByID(modalId)\nif((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.orders){//console.log(vendorState.pastOrders)\nsetProducts(res.data.orders);}//console.log(res.data.orders) //array of products\nif(modalId!==\"\"){handleOpen();}case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchOrderDetails(){return _ref.apply(this,arguments);};}();fetchOrderDetails();},[modalId]);var handleClickModal=function handleClickModal(id){if(modalId===id){handleOpen();// no change needed just open current modal\n}else{setModalId(id);// change id and useEffect will auto change and open\n}};var body=/*#__PURE__*/_jsxs(\"div\",{style:modalStyle,className:classes.paper,children:[/*#__PURE__*/_jsxs(Typography,{id:\"simple-modal-title\",align:\"center\",className:classNames(classes.title),children:[\"Order ID: \",modalId]}),/*#__PURE__*/_jsx(Grid,{container:true,direction:\"row\",spacing:10,alignItems:\"center\",children:products.map(function(product,index){return/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexWrap:\"wrap\",p:1// bgcolor=\"background.paper\"\n// css={{ maxWidth: 300 }}\n,justifyContent:\"space-between\",borderRadius:10,children:[/*#__PURE__*/_jsxs(Box,{p:1,borderRadius:10,children:[/*#__PURE__*/_jsx(Typography,{align:\"center\",className:classNames(classes.subTitle),children:\"Product\"}),/*#__PURE__*/_jsx(Typography,{align:\"center\",className:classNames(classes.subTitle),children:product.product_id})]}),/*#__PURE__*/_jsxs(Box,{p:1,borderRadius:10,children:[/*#__PURE__*/_jsx(Typography,{align:\"center\",className:classNames(classes.subTitle),children:\"Quantity\"}),/*#__PURE__*/_jsx(Typography,{align:\"center\",className:classNames(classes.subTitle),children:product.quantity})]}),/*#__PURE__*/_jsx(Divider,{})]})},index);})})]});return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(VendorDashboard,{}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:'50%',top:'50%',transform:'translate(-50%, -50%)',display:'block'}}),/*#__PURE__*/_jsx(\"main\",{className:classes.content,children:/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"center\",justifyContent:\"center\",style:{minHeight:\"100vh\"},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:\"auto\",children:/*#__PURE__*/_jsx(DateRangePicker,{onChange:function onChange(item){return setDateRange([item.selection]);},showSelectionPreview:true,moveRangeOnFirstSelection:false,months:1,ranges:dateRange,direction:\"horizontal\",className:classNames(classes.dateRange)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Container,{className:classNames(classes.customContainer),children:[/*#__PURE__*/_jsx(Typography,{align:\"left\",className:classNames(classes.title),children:\"Past Orders\"}),/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Order ID\"}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Date \"}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Delivery\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Order Information\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:filterOrder.map(function(order,index){return/*#__PURE__*/_jsxs(TableRow,{style:index%2?{background:\"#F3F3F3\"}:{background:\"white\"},children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:order.order_id}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:formatDate(order.created_at)}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:order.delivery_address===\"pick-up\"?\"No\":\"Yes\"}),/*#__PURE__*/_jsx(MuiThemeProvider,{theme:theme,children:/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsxs(Button,{id:order.order_id,onClick:function onClick(){return handleClickModal(order.order_id);},variant:\"contained\",className:classes.showMoreButton,children:[\" \",\"Show More\",\" \"]})})})]},order.order_id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.seeMore,children:/*#__PURE__*/_jsx(Link,{color:\"primary\",href:\"#\",onClick:preventDefault,children:\"See more orders\"})}),/*#__PURE__*/_jsx(Modal,{open:open,onClose:handleClose,\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:body})]})})]})})]});}","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/deployment1Frontend/src/components/VendorPastOrders/VendorPastOrders.js"],"names":["React","makeStyles","Typography","classNames","Box","Container","Button","VendorDashboard","useAppStateContext","Table","TableBody","TableCell","TableHead","TableRow","Link","formatDate","createTheme","MuiThemeProvider","Modal","useEffect","useState","Grid","Divider","axios","DateRangePicker","getModalStyle","top","left","transform","theme","palette","primary","light","main","dark","contrastText","secondary","green","useStyles","root","display","appBar","position","toolbar","mixins","content","flexGrow","backgroundColor","background","default","padding","spacing","dateRange","marginTop","title","color","fontSize","fontWeight","customContainer","paddingLeft","paddingRight","seeMore","showMoreButton","height","paper","width","border","boxShadow","shadows","VendorCurrentOrders","vendorState","setvendorState","classes","modalStyle","open","setOpen","modalId","setModalId","products","setProducts","pastOrders","filterOrder","setFilterOrder","handleOpen","handleClose","startDate","Date","endDate","key","setDateRange","start","end","filter","item","date","created_at","setHours","console","log","preventDefault","event","fetchOrderDetails","get","params","orderId","res","data","orders","handleClickModal","id","body","map","product","index","subTitle","product_id","quantity","minHeight","selection","order","order_id","delivery_address"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport classNames from \"classnames\";\nimport Box from \"@material-ui/core/Box\";\nimport { Container } from \"@material-ui/core\";\nimport { Button } from \"@material-ui/core\";\nimport VendorDashboard from \"../VendorDashboard/VendorDashboard\";\nimport { useAppStateContext } from \"../../contexts/appStateContext\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Link from \"@material-ui/core/Link\";\nimport {formatDate } from \"../../utils/format\";\nimport { createTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { useEffect, useState } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Divider from \"@material-ui/core/Divider\";\nimport axios from \"axios\";\nimport { DateRangePicker } from 'react-date-range'; // date range\nimport 'react-date-range/dist/styles.css'; // main css file\nimport 'react-date-range/dist/theme/default.css'; // theme css file\n\nfunction getModalStyle() {\n  const top = 50\n  const left = 50\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      light: \"#757ce8\",\n      main: \"#3f50b5\",\n      dark: \"#002884\",\n      contrastText: \"#fff\",\n    },\n    secondary: {\n      light: \"#ff7961\",\n      main: \"#f44336\",\n      dark: \"#ba000d\",\n      contrastText: \"#000\",\n    },\n    green: {\n      main: \"#43a047\",\n    },\n  },\n});\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  appBar: {\n    position: \"relative\",\n  },\n  // necessary for content to be below app bar\n  toolbar: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(3),\n  },\n  dateRange: {\n    marginTop: 50\n  },\n  title: {\n    color: \"#00000\",\n    fontSize: 35,\n    fontWeight: 600, // or 'bold'\n    marginTop: 50,\n  },\n  customContainer: {\n    paddingLeft: 84,\n    paddingRight: 84\n  },\n  seeMore: {\n    marginTop: theme.spacing(3),\n  },\n  showMoreButton: {\n    color: theme.palette.green,\n    height: 30,\n  },\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function VendorCurrentOrders() {\n  const { vendorState, setvendorState } = useAppStateContext();\n  const classes = useStyles();\n  const [modalStyle] = useState(getModalStyle);\n  const [open, setOpen] = useState(false);\n  const [modalId, setModalId] = useState(\"\");\n  const [products, setProducts] = useState([]);\n  const [filterOrder, setFilterOrder] = useState(vendorState.pastOrders)\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const [dateRange, setDateRange] = useState([\n    {\n      startDate: new Date(),\n      endDate: new Date(),\n      key: 'selection'\n    }\n  ]);\n  const start = dateRange[0].startDate\n  const end = dateRange[0].endDate\n\n  useEffect(() => {\n    setFilterOrder(\n      vendorState.pastOrders.filter(item => {\n        let date = new Date(item.created_at)\n        date.setHours(0,0,0,0)\n        // console.log(date)\n        // console.log(\"start: \",start)\n        // console.log(\"end: \",end)\n        return date >= start && date <= end;\n     }\n    ))\n  }, [start, end, vendorState.pastOrders]);\n\n  console.log(filterOrder)\n\n  function preventDefault(event) {\n    event.preventDefault();\n  }\n\n  useEffect(() => {\n    // action on update of modal\n    const fetchOrderDetails = async () => {\n      const res = await axios.get(\"http://localhost:3001/order/detailByID\", {\n        params: {\n          orderId: modalId,\n        },\n      });\n      //const res = await apiClient.getOrderByID(modalId)\n      if (res.data?.orders) {\n        //console.log(vendorState.pastOrders)\n        setProducts(res.data.orders);\n      }\n      //console.log(res.data.orders) //array of products\n      if (modalId !== \"\") {\n        handleOpen();\n      }\n    };\n\n    fetchOrderDetails();\n  }, [modalId]);\n\n  const handleClickModal = (id) => {\n    if (modalId === id) {\n      handleOpen(); // no change needed just open current modal\n    } else {\n      setModalId(id); // change id and useEffect will auto change and open\n    }\n  };\n\n\n  const body = (\n    <div style={modalStyle} className={classes.paper}>\n      <Typography\n        id=\"simple-modal-title\"\n        align=\"center\"\n        className={classNames(classes.title)}\n      >\n        Order ID: {modalId}\n      </Typography>\n      <Grid container direction=\"row\" spacing={10} alignItems=\"center\">\n        {products.map((product, index) => (\n          <Grid key={index} item>\n            <Box\n              display=\"flex\"\n              flexWrap=\"wrap\"\n              p={1}\n              // bgcolor=\"background.paper\"\n              // css={{ maxWidth: 300 }}\n              justifyContent=\"space-between\"\n              borderRadius={10}\n            >\n              <Box p={1} borderRadius={10}>\n                <Typography\n                  align=\"center\"\n                  className={classNames(classes.subTitle)}\n                >\n                  Product\n                </Typography>\n                <Typography\n                  align=\"center\"\n                  className={classNames(classes.subTitle)}\n                >\n                  {product.product_id}\n                </Typography>\n              </Box>\n              <Box p={1} borderRadius={10}>\n                <Typography\n                  align=\"center\"\n                  className={classNames(classes.subTitle)}\n                >\n                  Quantity\n                </Typography>\n                <Typography\n                  align=\"center\"\n                  className={classNames(classes.subTitle)}\n                >\n                  {product.quantity}\n                </Typography>\n              </Box>\n              <Divider></Divider>\n            </Box>\n          </Grid>\n        ))}\n      </Grid>\n    </div>\n  );\n\n  return (\n    <div className={classes.root}>\n      <VendorDashboard />\n      <div style={{\n        position: 'absolute', \n        left: '50%', \n        top: '50%',\n        transform: 'translate(-50%, -50%)',\n        display: 'block'\n    }}>\n      \n      </div>\n      <main className={classes.content}>\n      <Grid container\n        alignItems='center'\n        justifyContent='center'\n        style={{ minHeight: \"100vh\" }}>\n          <Grid item xs='auto'>\n          <DateRangePicker\n                    onChange={item => setDateRange([item.selection])}\n                    showSelectionPreview={true}\n                    moveRangeOnFirstSelection={false}\n                    months={1}\n                    ranges={dateRange}\n                    direction=\"horizontal\"\n                    className={classNames(classes.dateRange)}\n                />\n        </Grid>\n        <Grid item xs={12}>\n        <Container className={classNames(classes.customContainer)}>\n          <Typography align=\"left\" className={classNames(classes.title)}>\n            Past Orders\n          </Typography>\n          <Table size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell align=\"left\">Order ID</TableCell>\n                <TableCell align=\"left\">Date </TableCell>\n                <TableCell align=\"left\">Delivery</TableCell>\n                <TableCell align=\"center\">Order Information</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {filterOrder.map((order, index) => (\n                <TableRow\n                  key={order.order_id}\n                  style={\n                    index % 2\n                      ? { background: \"#F3F3F3\" }\n                      : { background: \"white\" }\n                  }\n                >\n                  <TableCell align=\"left\">{order.order_id}</TableCell>\n                  <TableCell align=\"left\">{formatDate(order.created_at)}</TableCell>\n                  <TableCell align=\"left\">\n                    {order.delivery_address === \"pick-up\" ? \"No\" : \"Yes\"}\n                  </TableCell>\n                  <MuiThemeProvider theme={theme}>\n                    <TableCell align=\"center\">\n                      <Button\n                        id={order.order_id}\n                        onClick={() => handleClickModal(order.order_id)}\n                        variant=\"contained\"\n                        className={classes.showMoreButton}\n                      >\n                        {\" \"}\n                        Show More{\" \"}\n                      </Button>\n                    </TableCell>\n                  </MuiThemeProvider>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          <div className={classes.seeMore}>\n            <Link color=\"primary\" href=\"#\" onClick={preventDefault}>\n              See more orders\n            </Link>\n          </div>\n          <Modal\n            open={open}\n            onClose={handleClose}\n            aria-labelledby=\"simple-modal-title\"\n            aria-describedby=\"simple-modal-description\"\n          >\n            {body}\n          </Modal>\n        </Container>\n        </Grid>\n        </Grid>\n      </main>\n     \n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}