{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Button from'@material-ui/core/Button';import{useState}from\"react\";import{Grid,Paper,Avatar,TextField,Typography,Link}from'@material-ui/core';import FormControlLabel from'@material-ui/core/FormControlLabel';import Checkbox from'@material-ui/core/Checkbox';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import{useNavigate}from\"react-router-dom\";import apiClient from'../../services/apiClient';import{useAppStateContext}from'../../contexts/appStateContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useAppStateContext=useAppStateContext(),appState=_useAppStateContext.appState,setAppState=_useAppStateContext.setAppState;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isProcessing=_useState2[0],setIsProcessing=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState({email:\"\",password:\"\"}),_useState6=_slicedToArray(_useState5,2),form=_useState6[0],setForm=_useState6[1];var handleOnInputChange=function handleOnInputChange(event){setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},event.target.name,event.target.value));});};var handleOnSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$apiClient$logi,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsProcessing(true);setErrors(function(e){return _objectSpread(_objectSpread({},e),{},{form:null});});_context.next=4;return apiClient.loginUser({email:form.email,password:form.password});case 4:_yield$apiClient$logi=_context.sent;data=_yield$apiClient$logi.data;error=_yield$apiClient$logi.error;if(error){setErrors(function(e){return _objectSpread(_objectSpread({},e),{},{form:error});});}if(data===null||data===void 0?void 0:data.user){setAppState(function(a){return _objectSpread(_objectSpread({},a),{},{first_name:data.user.first_name,rewards:data.user.rewards,last_name:data.user.last_last,isAuthenticated:true,email:data.user.email,is_admin:data.user.isAdmin});});apiClient.setToken(data.token);}setIsProcessing(false);if(data.user.isAdmin){navigate(\"/vendordashboard\");}else{navigate(\"/accountProfile\");}case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleOnSubmit(){return _ref.apply(this,arguments);};}();var paperStyle={padding:20,height:\"70vh\",width:280,margin:\"20px auto\"};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Paper,{elevation:10,style:paperStyle,children:[/*#__PURE__*/_jsxs(Grid,{align:\"center\",children:[/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"})]}),/*#__PURE__*/_jsx(TextField,{onChange:handleOnInputChange,name:\"email\",label:\"email\",placeholder:\"Enter email\",fullWidth:true,required:true}),/*#__PURE__*/_jsx(TextField,{onChange:handleOnInputChange,name:\"password\",label:\"Password\",placeholder:\"Enter password\",type:\"password\",fullWidth:true,required:true}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox// checked={state.checkedB}\n// onChange={handleChange}\n,{name:\"checkedB\",color:\"primary\"}),label:\"Remember Me\"}),/*#__PURE__*/_jsx(Button,{onClick:handleOnSubmit,type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,children:\"Sign in\"}),/*#__PURE__*/_jsxs(Typography,{children:[\"Do you have an account?\",/*#__PURE__*/_jsx(Link,{href:\"/signup\",children:\"Sign Up\"})]})]})});}","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/deployment1Frontend/src/components/Login/Login.js"],"names":["Button","useState","Grid","Paper","Avatar","TextField","Typography","Link","FormControlLabel","Checkbox","LockOutlinedIcon","useNavigate","apiClient","useAppStateContext","Login","appState","setAppState","navigate","isProcessing","setIsProcessing","errors","setErrors","email","password","form","setForm","handleOnInputChange","event","f","target","name","value","handleOnSubmit","e","loginUser","data","error","user","a","first_name","rewards","last_name","last_last","isAuthenticated","is_admin","isAdmin","setToken","token","paperStyle","padding","height","width","margin"],"mappings":"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","sourcesContent":["import Button from '@material-ui/core/Button';\nimport { useState } from \"react\"\nimport { Grid, Paper ,Avatar, TextField, Typography, Link} from '@material-ui/core';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport { useNavigate } from \"react-router-dom\";\nimport apiClient from '../../services/apiClient';\nimport { useAppStateContext } from '../../contexts/appStateContext';\n\n\nexport default function Login(){\n    const { appState, setAppState} = useAppStateContext()\n    const navigate = useNavigate()\n    const [isProcessing, setIsProcessing] = useState(false)\n    const [errors, setErrors] = useState({})\n    const [form, setForm] = useState({\n    email: \"\",\n    password: \"\",\n  })\n\n    const handleOnInputChange = (event) => {\n        setForm((f) => ({ ...f, [event.target.name]: event.target.value }))\n    }\n\n    const handleOnSubmit = async () => {\n        setIsProcessing(true)\n        setErrors((e) => ({ ...e, form: null }))\n\n        const {data, error } = await apiClient.loginUser({email: form.email, password: form.password})\n        if (error){\n          setErrors((e) => ({ ...e, form:error}))\n        }\n        if (data?.user){\n            setAppState((a) => (\n                {\n                    ...a, \n                    first_name: data.user.first_name,\n                    rewards:data.user.rewards,\n                    last_name:data.user.last_last,\n                    isAuthenticated: true,\n                    email:data.user.email,\n                    is_admin:data.user.isAdmin\n                }\n                ))\n          apiClient.setToken(data.token)\n        }\n\n        setIsProcessing(false)\n        if(data.user.isAdmin){\n            navigate(\"/vendordashboard\")\n        }else{\n            navigate(\"/accountProfile\")\n        }\n      }\n\n    const paperStyle = {\n        padding:20,\n        height:\"70vh\",\n        width:280,\n        margin:\"20px auto\"\n    }\n    return(\n        <div>\n            <Paper elevation = {10} style= {paperStyle}>\n                <Grid align = \"center\">\n                    <Avatar>\n                        <LockOutlinedIcon/>\n                    </Avatar>\n                    <h2>\n                        Sign In\n                    </h2>\n                </Grid>\n                <TextField  \n                    onChange={handleOnInputChange} \n                    name =\"email\"\n                    label = \"email\" \n                    placeholder = \"Enter email\" \n                    fullWidth \n                    required\n                />\n                <TextField \n                    onChange={handleOnInputChange} \n                    name =\"password\"\n                    label = \"Password\" \n                    placeholder = \"Enter password\" \n                    type = \"password\" \n                    fullWidth \n                    required\n                />\n                <FormControlLabel\n                    control={\n                    <Checkbox\n                        // checked={state.checkedB}\n                        // onChange={handleChange}\n                        name=\"checkedB\"\n                        color=\"primary\"\n                    />\n                    }\n                    label=\"Remember Me\"\n                />\n                <Button \n                    onClick ={handleOnSubmit}\n                    type = 'submit' \n                    variant = \"contained\" \n                    color = 'primary' \n                    fullWidth\n                    >Sign in\n                </Button>\n                <Typography>\n                    Do you have an account?\n                    <Link href =\"/signup\">\n                        Sign Up\n                    </Link>\n                </Typography>\n                \n            </Paper>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}