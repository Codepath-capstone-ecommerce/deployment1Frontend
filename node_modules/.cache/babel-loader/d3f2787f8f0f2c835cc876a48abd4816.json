{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kordellschrock/Documents/Github/deployment1Frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from\"axios\";var ApiClient=/*#__PURE__*/function(){function ApiClient(remoteHostUrl){_classCallCheck(this,ApiClient);this.remoteHostUrl=remoteHostUrl;this.token=null;this.tokenName=\"pizza_shop_token\";}_createClass(ApiClient,[{key:\"setToken\",value:function setToken(token){this.token=token;localStorage.setItem(this.tokenName,token);}},{key:\"request\",value:function(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var endpoint,_ref$method,method,_ref$data,data,url,headers,res,_error$response,_error$response$data,_error$response$data$,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:endpoint=_ref.endpoint,_ref$method=_ref.method,method=_ref$method===void 0?'GET':_ref$method,_ref$data=_ref.data,data=_ref$data===void 0?{}:_ref$data;url=\"\".concat(this.remoteHostUrl,\"/\").concat(endpoint);headers={\"Content-Type\":\"application/json\"};if(this.token){headers[\"Authorization\"]=\"Bearer \".concat(this.token);}_context.prev=4;_context.next=7;return axios({url:url,method:method,data:data,headers:headers});case 7:res=_context.sent;return _context.abrupt(\"return\",{data:res.data,error:null});case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);console.error({errorResponse:_context.t0.response});message=_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:(_error$response$data$=_error$response$data.error)===null||_error$response$data$===void 0?void 0:_error$response$data$.message;return _context.abrupt(\"return\",{data:null,error:message||String(_context.t0)});case 16:case\"end\":return _context.stop();}}},_callee,this,[[4,11]]);}));function request(_x){return _request.apply(this,arguments);}return request;}()},{key:\"fetchProductsByCategory\",value:function(){var _fetchProductsByCategory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.request({endpoint:'products/category',method:\"POST\",data:data});case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2,this);}));function fetchProductsByCategory(_x2){return _fetchProductsByCategory.apply(this,arguments);}return fetchProductsByCategory;}()},{key:\"fetchProductByName\",value:function(){var _fetchProductByName=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.request({endpoint:'products/byName',method:\"POST\",data:data});case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee3,this);}));function fetchProductByName(_x3){return _fetchProductByName.apply(this,arguments);}return fetchProductByName;}()},{key:\"getWeeklyCustomers\",value:function(){var _getWeeklyCustomers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.request({endpoint:'admin/weeklycustomers',method:\"POST\",data:data});case 2:return _context4.abrupt(\"return\",_context4.sent);case 3:case\"end\":return _context4.stop();}}},_callee4,this);}));function getWeeklyCustomers(_x4){return _getWeeklyCustomers.apply(this,arguments);}return getWeeklyCustomers;}()},{key:\"getWeeklyOrders\",value:function(){var _getWeeklyOrders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.request({endpoint:'admin/weeklyorders',method:\"POST\",data:data});case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee5,this);}));function getWeeklyOrders(_x5){return _getWeeklyOrders.apply(this,arguments);}return getWeeklyOrders;}()},{key:\"getCurrentOrders\",value:function(){var _getCurrentOrders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.request({endpoint:'order/current',method:\"GET\"});case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}},_callee6,this);}));function getCurrentOrders(){return _getCurrentOrders.apply(this,arguments);}return getCurrentOrders;}()},{key:\"getPastOrders\",value:function(){var _getPastOrders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.request({endpoint:'order/past',method:\"GET\"});case 2:return _context7.abrupt(\"return\",_context7.sent);case 3:case\"end\":return _context7.stop();}}},_callee7,this);}));function getPastOrders(){return _getPastOrders.apply(this,arguments);}return getPastOrders;}()},{key:\"completeOrderDetailByID\",value:function(){var _completeOrderDetailByID=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(data){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(data);_context8.next=3;return this.request({endpoint:'order/detailByID/complete',method:\"POST\",data:data});case 3:return _context8.abrupt(\"return\",_context8.sent);case 4:case\"end\":return _context8.stop();}}},_callee8,this);}));function completeOrderDetailByID(_x6){return _completeOrderDetailByID.apply(this,arguments);}return completeOrderDetailByID;}()},{key:\"createOrder\",value:function(){var _createOrder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(data){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.request({endpoint:'order/create',method:\"POST\",data:data});case 2:return _context9.abrupt(\"return\",_context9.sent);case 3:case\"end\":return _context9.stop();}}},_callee9,this);}));function createOrder(_x7){return _createOrder.apply(this,arguments);}return createOrder;}()},{key:\"listProducts\",value:function(){var _listProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.request({endpoint:'products/get',method:\"GET\"});case 2:return _context10.abrupt(\"return\",_context10.sent);case 3:case\"end\":return _context10.stop();}}},_callee10,this);}));function listProducts(){return _listProducts.apply(this,arguments);}return listProducts;}()},{key:\"listCart\",value:function(){var _listCart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return this.request({endpoint:'products/cart',method:\"GET\"});case 2:return _context11.abrupt(\"return\",_context11.sent);case 3:case\"end\":return _context11.stop();}}},_callee11,this);}));function listCart(){return _listCart.apply(this,arguments);}return listCart;}()},{key:\"fetchUserFromToken\",value:function(){var _fetchUserFromToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return this.request({endpoint:'auth/me',method:\"GET\"});case 2:return _context12.abrupt(\"return\",_context12.sent);case 3:case\"end\":return _context12.stop();}}},_callee12,this);}));function fetchUserFromToken(){return _fetchUserFromToken.apply(this,arguments);}return fetchUserFromToken;}()},{key:\"loginUser\",value:function(){var _loginUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(credentials){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return this.request({endpoint:'auth/login',method:'POST',data:credentials});case 2:return _context13.abrupt(\"return\",_context13.sent);case 3:case\"end\":return _context13.stop();}}},_callee13,this);}));function loginUser(_x8){return _loginUser.apply(this,arguments);}return loginUser;}()},{key:\"signupUser\",value:function(){var _signupUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(credentials){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return this.request({endpoint:'auth/register',method:'POST',data:credentials});case 2:return _context14.abrupt(\"return\",_context14.sent);case 3:case\"end\":return _context14.stop();}}},_callee14,this);}));function signupUser(_x9){return _signupUser.apply(this,arguments);}return signupUser;}()},{key:\"logoutUser\",value:function(){var _logoutUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:this.setToken(null);localStorage.setItem(this.tokenName,\"\");case 2:case\"end\":return _context15.stop();}}},_callee15,this);}));function logoutUser(){return _logoutUser.apply(this,arguments);}return logoutUser;}()}]);return ApiClient;}();export default new ApiClient(process.env.REACT_APP_REMOTE_HOST_URL||\"http://localhost:3001\");","map":{"version":3,"sources":["/Users/kordellschrock/Documents/Github/deployment1Frontend/src/services/apiClient.js"],"names":["axios","ApiClient","remoteHostUrl","token","tokenName","localStorage","setItem","endpoint","method","data","url","headers","res","error","console","errorResponse","response","message","String","request","log","credentials","setToken","process","env","REACT_APP_REMOTE_HOST_URL"],"mappings":"+iBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,C,GAEMC,CAAAA,S,yBACJ,mBAAYC,aAAZ,CAA2B,iCACzB,KAAKA,aAAL,CAAqBA,aAArB,CACA,KAAKC,KAAL,CAAa,IAAb,CACA,KAAKC,SAAL,CAAiB,kBAAjB,CACD,C,8CAED,kBAASD,KAAT,CAAgB,CACd,KAAKA,KAAL,CAAaA,KAAb,CACAE,YAAY,CAACC,OAAb,CAAqB,KAAKF,SAA1B,CAAqCD,KAArC,EACD,C,uGAED,yQAAgBI,QAAhB,MAAgBA,QAAhB,kBAA0BC,MAA1B,CAA0BA,MAA1B,sBAAmC,KAAnC,4BAA0CC,IAA1C,CAA0CA,IAA1C,oBAAiD,EAAjD,WAEQC,GAFR,WAEiB,KAAKR,aAFtB,aAEuCK,QAFvC,EAGQI,OAHR,CAGkB,CACd,eAAgB,kBADF,CAHlB,CAOE,GAAI,KAAKR,KAAT,CAAgB,CACdQ,OAAO,CAAC,eAAD,CAAP,kBAAqC,KAAKR,KAA1C,EACD,CATH,sCAYsBH,CAAAA,KAAK,CAAC,CAAEU,GAAG,CAAHA,GAAF,CAAOF,MAAM,CAANA,MAAP,CAAeC,IAAI,CAAJA,IAAf,CAAqBE,OAAO,CAAPA,OAArB,CAAD,CAZ3B,QAYUC,GAZV,+CAaW,CAAEH,IAAI,CAAEG,GAAG,CAACH,IAAZ,CAAkBI,KAAK,CAAE,IAAzB,CAbX,4DAeIC,OAAO,CAACD,KAAR,CAAc,CAAEE,aAAa,CAAE,YAAMC,QAAvB,CAAd,EACMC,OAhBV,kEAgBoB,YAAOD,QAhB3B,gEAgBoB,gBAAiBP,IAhBrC,sEAgBoB,qBAAuBI,KAhB3C,gDAgBoB,sBAA8BI,OAhBlD,iCAiBW,CAAER,IAAI,CAAE,IAAR,CAAcI,KAAK,CAAEI,OAAO,EAAIC,MAAM,aAAtC,CAjBX,uE,wNAqBA,kBAA8BT,IAA9B,6IACe,MAAKU,OAAL,CAAa,CAACZ,QAAQ,CAAE,mBAAX,CAAgCC,MAAM,CAAE,MAAxC,CAAgDC,IAAI,CAACA,IAArD,CAAb,CADf,sH,+PAGA,kBAAyBA,IAAzB,6IACe,MAAKU,OAAL,CAAa,CAAEZ,QAAQ,CAAE,iBAAZ,CAA+BC,MAAM,CAAE,MAAvC,CAA+CC,IAAI,CAACA,IAApD,CAAb,CADf,sH,gPAIA,kBAAyBA,IAAzB,6IACe,MAAKU,OAAL,CAAa,CAAEZ,QAAQ,CAAE,uBAAZ,CAAqCC,MAAM,CAAE,MAA7C,CAAqDC,IAAI,CAACA,IAA1D,CAAb,CADf,sH,0OAIA,kBAAsBA,IAAtB,6IACe,MAAKU,OAAL,CAAa,CAAEZ,QAAQ,CAAE,oBAAZ,CAAkCC,MAAM,CAAE,MAA1C,CAAkDC,IAAI,CAACA,IAAvD,CAAb,CADf,sH,mOAIA,+JACe,MAAKU,OAAL,CAAa,CAACZ,QAAQ,CAAC,eAAV,CAA2BC,MAAM,CAAC,KAAlC,CAAb,CADf,sH,6NAIA,+JACe,MAAKW,OAAL,CAAa,CAACZ,QAAQ,CAAC,YAAV,CAAwBC,MAAM,CAAC,KAA/B,CAAb,CADf,sH,wOAIA,kBAA8BC,IAA9B,sHACEK,OAAO,CAACM,GAAR,CAAYX,IAAZ,EADF,uBAEe,MAAKU,OAAL,CAAa,CAAEZ,QAAQ,CAAE,2BAAZ,CAAyCC,MAAM,CAAE,MAAjD,CAAyDC,IAAI,CAACA,IAA9D,CAAb,CAFf,sH,iPAKA,kBAAkBA,IAAlB,6IACe,MAAKU,OAAL,CAAa,CAAEZ,QAAQ,CAAE,cAAZ,CAA4BC,MAAM,CAAE,MAApC,CAA4CC,IAAI,CAACA,IAAjD,CAAb,CADf,sH,+MAIA,qKACe,MAAKU,OAAL,CAAa,CAAEZ,QAAQ,CAAE,cAAZ,CAA4BC,MAAM,CAAE,KAApC,CAAb,CADf,0H,uMAIA,qKACe,MAAKW,OAAL,CAAa,CAAEZ,QAAQ,CAAE,eAAZ,CAA6BC,MAAM,CAAE,KAArC,CAAb,CADf,0H,+MAIA,qKACe,MAAKW,OAAL,CAAa,CAAEZ,QAAQ,CAAE,SAAZ,CAAuBC,MAAM,CAAE,KAA/B,CAAb,CADf,0H,2NAIA,mBAAgBa,WAAhB,kJACe,MAAKF,OAAL,CAAa,CAAEZ,QAAQ,CAAE,YAAZ,CAA0BC,MAAM,CAAE,MAAlC,CAA0CC,IAAI,CAAEY,WAAhD,CAAb,CADf,0H,qMAIA,mBAAiBA,WAAjB,kJACe,MAAKF,OAAL,CAAa,CAAEZ,QAAQ,CAAE,eAAZ,CAA6BC,MAAM,CAAE,MAArC,CAA6CC,IAAI,CAAEY,WAAnD,CAAb,CADf,0H,wMAIA,6IACE,KAAKC,QAAL,CAAc,IAAd,EACAjB,YAAY,CAACC,OAAb,CAAqB,KAAKF,SAA1B,CAAqC,EAArC,EAFF,+D,iHAMF,cAAe,IAAIH,CAAAA,SAAJ,CAAcsB,OAAO,CAACC,GAAR,CAAYC,yBAAZ,EAAyC,uBAAvD,CAAf","sourcesContent":["import axios from \"axios\"\n\nclass ApiClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl\n    this.token = null\n    this.tokenName = \"pizza_shop_token\"\n  }\n\n  setToken(token) {\n    this.token = token\n    localStorage.setItem(this.tokenName, token)\n  }\n\n  async request({ endpoint, method = 'GET', data = {} }) {\n\n    const url = `${this.remoteHostUrl}/${endpoint}`\n    const headers = {\n      \"Content-Type\": \"application/json\",\n    }\n\n    if (this.token) {\n      headers[\"Authorization\"] = `Bearer ${this.token}`;\n    }\n\n    try {\n      const res = await axios({ url, method, data, headers })\n      return { data: res.data, error: null }\n    } catch (error) {\n      console.error({ errorResponse: error.response })\n      const message = error?.response?.data?.error?.message\n      return { data: null, error: message || String(error) }\n    }\n  }\n\n  async fetchProductsByCategory(data){\n    return await this.request({endpoint: 'products/category', method: \"POST\", data:data})\n  }\n  async fetchProductByName(data){\n    return await this.request({ endpoint: 'products/byName', method: \"POST\", data:data})\n  }\n\n  async getWeeklyCustomers(data) {\n    return await this.request({ endpoint: 'admin/weeklycustomers', method: \"POST\", data:data})\n  }\n\n  async getWeeklyOrders(data) {\n    return await this.request({ endpoint: 'admin/weeklyorders', method: \"POST\", data:data})\n  }\n\n  async getCurrentOrders(){\n    return await this.request({endpoint:'order/current', method:\"GET\"})\n  }\n\n  async getPastOrders(){\n    return await this.request({endpoint:'order/past', method:\"GET\"})\n  }\n\n  async completeOrderDetailByID(data) {\n    console.log(data)\n    return await this.request({ endpoint: 'order/detailByID/complete', method: \"POST\", data:data})\n  }\n  \n  async createOrder(data) {\n    return await this.request({ endpoint: 'order/create', method: \"POST\", data:data})\n  }\n\n  async listProducts() {\n    return await this.request({ endpoint: 'products/get', method: \"GET\" })\n  }\n\n  async listCart() {\n    return await this.request({ endpoint: 'products/cart', method: \"GET\" })\n  }\n\n  async fetchUserFromToken() {\n    return await this.request({ endpoint: 'auth/me', method: \"GET\" })\n  }\n\n  async loginUser(credentials) {\n    return await this.request({ endpoint: 'auth/login', method: 'POST', data: credentials })\n  }\n\n  async signupUser(credentials) {\n    return await this.request({ endpoint: 'auth/register', method: 'POST', data: credentials })\n  }\n\n  async logoutUser() {\n    this.setToken(null)\n    localStorage.setItem(this.tokenName, \"\")\n  }\n}\n\nexport default new ApiClient(process.env.REACT_APP_REMOTE_HOST_URL || \"http://localhost:3001\")"]},"metadata":{},"sourceType":"module"}